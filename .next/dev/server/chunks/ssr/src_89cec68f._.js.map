{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/slava/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/USL/towerads-admin-web/src/lib/api.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL!;\r\n\r\nexport async function api(\r\n  path: string,\r\n  options: RequestInit = {}\r\n): Promise<any> {\r\n  const token =\r\n    typeof window !== \"undefined\"\r\n      ? localStorage.getItem(\"admin_token\")\r\n      : null;\r\n\r\n  const headers: HeadersInit = {\r\n    ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    ...(options.headers || {}),\r\n  };\r\n\r\n  if (options.body) {\r\n    headers[\"Content-Type\"] = \"application/json\";\r\n  }\r\n\r\n  const res = await fetch(`${API_URL}${path}`, {\r\n    mode: \"cors\",              // üî• –í–ê–ñ–ù–û\r\n    credentials: \"include\",    // üî• –í–ê–ñ–ù–û (—É —Ç–µ–±—è cors —Å credentials)\r\n    ...options,\r\n    headers,\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const text = await res.text();\r\n    throw new Error(text || `API error ${res.status}`);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA,MAAM;AAEC,eAAe,IACpB,IAAY,EACZ,UAAuB,CAAC,CAAC;IAEzB,MAAM,QACJ,sCACI,0BACA;IAEN,MAAM,UAAuB;QAC3B,GAAI,sCAAQ,0BAAuC,CAAC,CAAC;QACrD,GAAI,QAAQ,OAAO,IAAI,CAAC,CAAC;IAC3B;IAEA,IAAI,QAAQ,IAAI,EAAE;QAChB,OAAO,CAAC,eAAe,GAAG;IAC5B;IAEA,MAAM,MAAM,MAAM,MAAM,GAAG,UAAU,MAAM,EAAE;QAC3C,MAAM;QACN,aAAa;QACb,GAAG,OAAO;QACV;IACF;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,QAAQ,CAAC,UAAU,EAAE,IAAI,MAAM,EAAE;IACnD;IAEA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/slava/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/USL/towerads-admin-web/src/app/%28admin%29/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Sidebar from \"@/components/admin/sidebar\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { api } from \"@/lib/api\";\r\n\r\ntype Stats = {\r\n  revenue: number;\r\n  impressions: number;\r\n  requests: number;\r\n  clicks: number;\r\n};\r\n\r\ntype Provider = {\r\n  provider: string;\r\n  status: \"active\" | \"paused\";\r\n};\r\n\r\nexport default function Dashboard() {\r\n  const [stats, setStats] = useState<Stats | null>(null);\r\n  const [providers, setProviders] = useState<Provider[]>([]);\r\n\r\n  useEffect(() => {\r\n    api(\"/admin/stats\").then(setStats);\r\n\r\n    api(\"/admin/mediation\").then((res) => {\r\n      setProviders(res.providers || []);\r\n    });\r\n  }, []);\r\n\r\n  const revenue = stats ? Number(stats.revenue) : 0;\r\n  const impressions = stats ? Number(stats.impressions) : 0;\r\n\r\n  const eCPM =\r\n    impressions > 0 ? (revenue / impressions) * 1000 : 0;\r\n\r\n  const profit = revenue * 0.8; // –≤—Ä–µ–º–µ–Ω–Ω–æ, –ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–¥—ë—Ç —Å –±—ç–∫–∞\r\n\r\n  return (\r\n    <div className=\"admin\">\r\n      <Sidebar />\r\n\r\n      <div className=\"content\">\r\n        <div className=\"page\">\r\n          <div className=\"page-inner\">\r\n\r\n            {/* ===== HEADER ===== */}\r\n            <div className=\"page-header\">\r\n              <div>\r\n                <h1 className=\"page-title\">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h1>\r\n                <p className=\"page-subtitle\">\r\n                  –û–±—â–∏–π –æ–±–∑–æ—Ä –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ===== METRICS ===== */}\r\n            {stats && (\r\n              <section className=\"dashboard-top\">\r\n                <div className=\"metric-card\">\r\n                  <span>–î–æ—Ö–æ–¥</span>\r\n                  <b>${revenue.toFixed(2)}</b>\r\n                </div>\r\n\r\n                <div className=\"metric-card\">\r\n                  <span>eCPM</span>\r\n                  <b>${eCPM.toFixed(2)}</b>\r\n                </div>\r\n\r\n                <div className=\"metric-card\">\r\n                  <span>–ü–æ–∫–∞–∑—ã</span>\r\n                  <b>{stats.impressions}</b>\r\n                </div>\r\n\r\n                <div className=\"metric-card\">\r\n                  <span>–ó–∞–ø—Ä–æ—Å—ã</span>\r\n                  <b>{stats.requests}</b>\r\n                </div>\r\n\r\n                <div className=\"metric-card profit\">\r\n                  <span>–ü—Ä–∏–±—ã–ª—å</span>\r\n                  <b>${profit.toFixed(2)}</b>\r\n                </div>\r\n              </section>\r\n            )}\r\n\r\n            {/* ===== SYSTEM STATUS ===== */}\r\n            <section className=\"dashboard-block\">\r\n              <h3>–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h3>\r\n\r\n              <div className=\"system-status\">\r\n                <div>\r\n                  API: <b className=\"ok\">–†–∞–±–æ—Ç–∞–µ—Ç</b>\r\n                </div>\r\n                <div>\r\n                  –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: <b className=\"ok\">–ù–æ—Ä–º–∞</b>\r\n                </div>\r\n                <div>\r\n                  –û—à–∏–±–∫–∏ (24—á): <b className=\"ok\">0</b>\r\n                </div>\r\n              </div>\r\n            </section>\r\n\r\n            {/* ===== PROVIDERS ===== */}\r\n            <section className=\"dashboard-block\">\r\n              <h3>–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã</h3>\r\n\r\n              <div className=\"mini-table\">\r\n                {providers.length === 0 && (\r\n                  <div className=\"muted\">–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>\r\n                )}\r\n\r\n                {providers.map((p) => (\r\n                  <div key={p.provider}>\r\n                    {p.provider}{\" \"}\r\n                    {p.status === \"active\" ? (\r\n                      <span className=\"ok\">–ê–∫—Ç–∏–≤–µ–Ω</span>\r\n                    ) : (\r\n                      <span className=\"warn\">–ü–∞—É–∑–∞</span>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </section>\r\n\r\n            {/* ===== ALERTS ===== */}\r\n            <section className=\"dashboard-block\">\r\n              <h3>–ê–ª–µ—Ä—Ç—ã</h3>\r\n\r\n              <div className=\"alert ok\">\r\n                –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ\r\n              </div>\r\n            </section>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAkBe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAe;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAEzD,IAAA,kNAAS,EAAC;QACR,IAAA,wHAAG,EAAC,gBAAgB,IAAI,CAAC;QAEzB,IAAA,wHAAG,EAAC,oBAAoB,IAAI,CAAC,CAAC;YAC5B,aAAa,IAAI,SAAS,IAAI,EAAE;QAClC;IACF,GAAG,EAAE;IAEL,MAAM,UAAU,QAAQ,OAAO,MAAM,OAAO,IAAI;IAChD,MAAM,cAAc,QAAQ,OAAO,MAAM,WAAW,IAAI;IAExD,MAAM,OACJ,cAAc,IAAI,AAAC,UAAU,cAAe,OAAO;IAErD,MAAM,SAAS,UAAU,KAAK,kCAAkC;IAEhE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,iJAAO;;;;;0BAER,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CAGb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAAa;;;;;;sDAC3B,8OAAC;4CAAE,WAAU;sDAAgB;;;;;;;;;;;;;;;;;4BAOhC,uBACC,8OAAC;gCAAQ,WAAU;;kDACjB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;0DAAK;;;;;;0DACN,8OAAC;;oDAAE;oDAAE,QAAQ,OAAO,CAAC;;;;;;;;;;;;;kDAGvB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;0DAAK;;;;;;0DACN,8OAAC;;oDAAE;oDAAE,KAAK,OAAO,CAAC;;;;;;;;;;;;;kDAGpB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;0DAAK;;;;;;0DACN,8OAAC;0DAAG,MAAM,WAAW;;;;;;;;;;;;kDAGvB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;0DAAK;;;;;;0DACN,8OAAC;0DAAG,MAAM,QAAQ;;;;;;;;;;;;kDAGpB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;0DAAK;;;;;;0DACN,8OAAC;;oDAAE;oDAAE,OAAO,OAAO,CAAC;;;;;;;;;;;;;;;;;;;0CAM1B,8OAAC;gCAAQ,WAAU;;kDACjB,8OAAC;kDAAG;;;;;;kDAEJ,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;oDAAI;kEACE,8OAAC;wDAAE,WAAU;kEAAK;;;;;;;;;;;;0DAEzB,8OAAC;;oDAAI;kEACU,8OAAC;wDAAE,WAAU;kEAAK;;;;;;;;;;;;0DAEjC,8OAAC;;oDAAI;kEACW,8OAAC;wDAAE,WAAU;kEAAK;;;;;;;;;;;;;;;;;;;;;;;;0CAMtC,8OAAC;gCAAQ,WAAU;;kDACjB,8OAAC;kDAAG;;;;;;kDAEJ,8OAAC;wCAAI,WAAU;;4CACZ,UAAU,MAAM,KAAK,mBACpB,8OAAC;gDAAI,WAAU;0DAAQ;;;;;;4CAGxB,UAAU,GAAG,CAAC,CAAC,kBACd,8OAAC;;wDACE,EAAE,QAAQ;wDAAE;wDACZ,EAAE,MAAM,KAAK,yBACZ,8OAAC;4DAAK,WAAU;sEAAK;;;;;iFAErB,8OAAC;4DAAK,WAAU;sEAAO;;;;;;;mDALjB,EAAE,QAAQ;;;;;;;;;;;;;;;;;0CAa1B,8OAAC;gCAAQ,WAAU;;kDACjB,8OAAC;kDAAG;;;;;;kDAEJ,8OAAC;wCAAI,WAAU;kDAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUxC"}}]
}