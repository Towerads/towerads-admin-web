{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/slava/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/USL/towerads-admin-web/src/lib/api.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL!;\r\n\r\nexport async function api(\r\n  path: string,\r\n  options: RequestInit = {}\r\n): Promise<any> {\r\n  const token =\r\n    typeof window !== \"undefined\"\r\n      ? localStorage.getItem(\"admin_token\")\r\n      : null;\r\n\r\n  const res = await fetch(`${API_URL}${path}`, {\r\n    ...options,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n      ...(options.headers || {}),\r\n    },\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const text = await res.text();\r\n    throw new Error(text || `API error ${res.status}`);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":";;;;AAAgB;AAAhB,MAAM;AAEC,eAAe,IACpB,IAAY,EACZ,UAAuB,CAAC,CAAC;IAEzB,MAAM,QACJ,uCACI,aAAa,OAAO,CAAC,iBACrB;IAEN,MAAM,MAAM,MAAM,MAAM,GAAG,UAAU,MAAM,EAAE;QAC3C,GAAG,OAAO;QACV,SAAS;YACP,gBAAgB;YAChB,GAAI,QAAQ;gBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;YAAC,IAAI,CAAC,CAAC;YACrD,GAAI,QAAQ,OAAO,IAAI,CAAC,CAAC;QAC3B;IACF;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,QAAQ,CAAC,UAAU,EAAE,IAAI,MAAM,EAAE;IACnD;IAEA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/slava/OneDrive/%D0%A0%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9%20%D1%81%D1%82%D0%BE%D0%BB/USL/towerads-admin-web/src/app/%28admin%29/orders/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { api } from \"@/lib/api\";\r\n\r\ntype OrderStatus = \"active\" | \"paused\" | \"completed\";\r\n\r\ntype Order = {\r\n  id: string;\r\n  status: OrderStatus;\r\n  impressions_total: number;\r\n  impressions_left: number;\r\n  impressions_done: number;\r\n  price_usd: string;\r\n  creative_type: string;\r\n  advertiser_email: string;\r\n  created_at: string;\r\n};\r\n\r\nexport default function OrdersPage() {\r\n  const router = useRouter();\r\n\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  async function loadOrders() {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const res = await api(\"/admin/orders\");\r\n      setOrders(res.items || []);\r\n    } catch (e: any) {\r\n      setError(e.message || \"Failed to load orders\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadOrders();\r\n  }, []);\r\n\r\n  async function orderAction(\r\n    id: string,\r\n    action: \"pause\" | \"resume\" | \"stop\"\r\n  ) {\r\n    await api(`/admin/orders/${id}/${action}`, { method: \"POST\" });\r\n    await loadOrders();\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: 28 }}>\r\n      <h1 style={title}>Orders</h1>\r\n      <p style={subtitle}>Manage all creative orders</p>\r\n\r\n      <div style={card}>\r\n        {/* HEADER */}\r\n        <div style={headerGrid}>\r\n          <div>Order</div>\r\n          <div>Advertiser</div>\r\n          <div>Type</div>\r\n          <div>Status</div>\r\n          <div>Impressions</div>\r\n          <div>Price</div>\r\n          <div>Actions</div>\r\n        </div>\r\n\r\n        {/* SKELETON */}\r\n        {loading &&\r\n          Array.from({ length: 5 }).map((_, i) => (\r\n            <SkeletonRow key={i} />\r\n          ))}\r\n\r\n        {/* ERROR */}\r\n        {error && (\r\n          <div style={{ padding: 16, color: \"#ff6b6b\" }}>\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        {/* DATA */}\r\n        {!loading &&\r\n          !error &&\r\n          orders.map((o) => (\r\n            <div\r\n              key={o.id}\r\n              style={rowGrid}\r\n              className=\"order-row\"\r\n              onClick={() => router.push(`/orders/${o.id}`)}\r\n            >\r\n              <div style={link}>{o.id.slice(0, 8)}â€¦</div>\r\n\r\n              <div style={muted}>{o.advertiser_email}</div>\r\n\r\n              <div style={pill}>{o.creative_type}</div>\r\n\r\n              <div>\r\n                <StatusBadge status={o.status} />\r\n              </div>\r\n\r\n              <div style={mono}>\r\n                {o.impressions_done}/{o.impressions_total}\r\n              </div>\r\n\r\n              <div style={mono}>${o.price_usd}</div>\r\n\r\n              <div\r\n                onClick={(e) => e.stopPropagation()} // ðŸ”¥ ÐšÐ›Ð®Ð§Ð•Ð’Ðž\r\n              >\r\n                <Actions order={o} onAction={orderAction} />\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n        {!loading && !error && orders.length === 0 && (\r\n          <div style={{ padding: 16, opacity: 0.6 }}>\r\n            No orders yet\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ================= COMPONENTS ================= */\r\n\r\nfunction Actions({\r\n  order,\r\n  onAction,\r\n}: {\r\n  order: Order;\r\n  onAction: (id: string, action: \"pause\" | \"resume\" | \"stop\") => void;\r\n}) {\r\n  return (\r\n    <div style={{ display: \"flex\", gap: 8 }}>\r\n      {order.status === \"active\" && (\r\n        <button\r\n          style={btn}\r\n          onClick={() => onAction(order.id, \"pause\")}\r\n        >\r\n          Pause\r\n        </button>\r\n      )}\r\n\r\n      {order.status === \"paused\" && (\r\n        <button\r\n          style={btn}\r\n          onClick={() => onAction(order.id, \"resume\")}\r\n        >\r\n          Resume\r\n        </button>\r\n      )}\r\n\r\n      {order.status !== \"completed\" && (\r\n        <button\r\n          style={{ ...btn, background: \"#3b1c1c\" }}\r\n          onClick={() => onAction(order.id, \"stop\")}\r\n        >\r\n          Stop\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StatusBadge({ status }: { status: OrderStatus }) {\r\n  const map: Record<OrderStatus, { bg: string; color: string }> = {\r\n    active: { bg: \"rgba(46,204,113,.2)\", color: \"#7dffb6\" },\r\n    paused: { bg: \"rgba(241,196,15,.2)\", color: \"#ffe58f\" },\r\n    completed: { bg: \"rgba(149,165,166,.2)\", color: \"#ccc\" },\r\n  };\r\n\r\n  return (\r\n    <span\r\n      style={{\r\n        padding: \"4px 10px\",\r\n        borderRadius: 999,\r\n        fontSize: 12,\r\n        fontWeight: 700,\r\n        background: map[status].bg,\r\n        color: map[status].color,\r\n      }}\r\n    >\r\n      {status}\r\n    </span>\r\n  );\r\n}\r\n\r\nfunction SkeletonRow() {\r\n  return (\r\n    <div style={rowGrid}>\r\n      {Array.from({ length: 7 }).map((_, i) => (\r\n        <div key={i} style={skeleton} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ================= STYLES ================= */\r\n\r\nconst title: React.CSSProperties = {\r\n  fontSize: 40,\r\n  fontWeight: 900,\r\n};\r\n\r\nconst subtitle: React.CSSProperties = {\r\n  opacity: 0.7,\r\n  marginBottom: 20,\r\n};\r\n\r\nconst card: React.CSSProperties = {\r\n  borderRadius: 18,\r\n  background: \"rgba(0,0,0,0.25)\",\r\n  border: \"1px solid rgba(255,255,255,0.08)\",\r\n  overflow: \"hidden\",\r\n};\r\n\r\nconst headerGrid: React.CSSProperties = {\r\n  display: \"grid\",\r\n  gridTemplateColumns: \"1fr 1.4fr .6fr .8fr .9fr .6fr 1fr\",\r\n  padding: \"14px 16px\",\r\n  fontSize: 12,\r\n  opacity: 0.6,\r\n  borderBottom: \"1px solid rgba(255,255,255,0.06)\",\r\n};\r\n\r\nconst rowGrid: React.CSSProperties = {\r\n  display: \"grid\",\r\n  gridTemplateColumns: \"1fr 1.4fr .6fr .8fr .9fr .6fr 1fr\",\r\n  padding: \"14px 16px\",\r\n  borderBottom: \"1px solid rgba(255,255,255,0.04)\",\r\n  alignItems: \"center\",\r\n  cursor: \"pointer\",\r\n  transition: \"background .15s\",\r\n};\r\n\r\nconst link: React.CSSProperties = {\r\n  fontWeight: 700,\r\n};\r\n\r\nconst muted: React.CSSProperties = {\r\n  opacity: 0.75,\r\n  fontSize: 13,\r\n};\r\n\r\nconst pill: React.CSSProperties = {\r\n  padding: \"4px 10px\",\r\n  borderRadius: 999,\r\n  background: \"rgba(255,255,255,0.08)\",\r\n  fontSize: 12,\r\n};\r\n\r\nconst mono: React.CSSProperties = {\r\n  fontFamily: \"monospace\",\r\n};\r\n\r\nconst btn: React.CSSProperties = {\r\n  padding: \"6px 10px\",\r\n  borderRadius: 10,\r\n  background: \"rgba(255,255,255,0.08)\",\r\n  border: \"1px solid rgba(255,255,255,0.12)\",\r\n  cursor: \"pointer\",\r\n  fontSize: 12,\r\n};\r\n\r\nconst skeleton: React.CSSProperties = {\r\n  height: 14,\r\n  borderRadius: 6,\r\n  background:\r\n    \"linear-gradient(90deg, rgba(255,255,255,.05), rgba(255,255,255,.15), rgba(255,255,255,.05))\",\r\n};\r\n"],"names":[],"mappings":"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"}}]
}